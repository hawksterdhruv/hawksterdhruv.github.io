<!DOCTYPE html>
<html>
<head>
   <meta charset="UTF-8"> 
  <title></title>
  <!-- <script src="codemirror/lib/codemirror.js"></script> -->
  <link rel="stylesheet" href="resources/main.css">
  <script src="resources/jquery.min.js"></script>
  <script src="resources/rangyinputs-jquery-src.js"></script>

  <style>
    

    textarea {
      resize: none;
      border-radius: 5px;
      padding: 5px;
      /*font-family: ;*/
    }




    .grid-container {
      display: grid;
      grid-gap: 20px;
      grid-template-columns: repeat(5,1fr) ;
     
      grid-template-rows: repeat(5,1fr);
      grid-template-areas:
      "header header header header header"
      "other1 other1 other2 other2 other2"
      "sms    sms    regex  regex  options"
      "sms    sms    regex  regex  options"
      "footer footer footer footer footer";
      
      min-height: 100%;
    }
  
    #sms {
      /*grid-column: 1/3;*/
      /*grid-row: 2/4;*/
      grid-area: sms;
      
    }
    #regex {
      grid-area: regex;
      /*grid-column: 3/5;*/
      /*grid-row:2/4;*/
      /*resize: none;*/
    }
    #options {
      grid-area: options;
      /*grid-column: 5/6;*/
      /*grid-row:2/4;*/
    }
    #type {
      grid-area: other2;

    }
    #type span{
      vertical-align:middle;
      font-size: 20px;
    }

  </style>
  
</head>
<body>
<div class="grid-container">
  <textarea name="" id="sms" ></textarea>
  
  
  
  <textarea name="" id="regex"></textarea>
  
  <div id="type">
    <span>Debit</span>
    <label class="switch">
      
      <input type="checkbox">
      <span class="slider round"></span>
      
    </label>
    <span>Credit</span>
  </div>

  <div id="options">
    <span class="pill prefix">acc</span>
    <span class="pill prefix">tx_amt</span>
    <span class="pill prefix">bal_amt</span>
    <span class="pill prefix">dt</span>
    <span class="pill prefix">tx_cur</span>
    <span class="pill prefix">bal_cur</span>
    <span class="pill prefix">narration</span>
    <!-- <span class="pill prefix">type</span> -->

  </div>
</div>
</body>
<script>
  $(document).ready(function() {

    var regex = {
      'acc':{input:'(?<account>',value:'(\d+)'},
      'tx_amt':{input:'(?<tx_amount>',value:'([\d,]+\.?\d*)'},
      'bal_amt':{input:'(?<bal_amt>',value:'([\d,]+\.?\d*)'},
      'dt':{input:'(?<date>',value:'(.+)'},
      'tx_cur':{input:'(?<tx_currency>',value:'(Rs\.|[a-zA-Z]+)'},
      'bal_cur':{input:'(?<bal_currency>',value:'(Rs\.|[a-zA-Z]+)'},
      'narration':{input:'(?<narration>',value:'(.+)'},
    }
    

    $('#sms').change(function(){
      $('#regex').val($(this).val());
    })

    $('#regex').keyup(function(){
      console.log('changing');
    });
    
    $('.prefix').click(function(){
      console.log(regex[$(this).text()].input.slice(1,));
      var pattern = regex[$(this).text()].input+regex[$(this).text()].value.slice(1,);
      $('#regex').replaceSelectedText(pattern, "collapseToEnd");
      // $('#regex').val($('#regex').val()+regex[$(this).text()].input+regex[$(this).text()].value.slice(1,));
      $('#regex').focus();
    })
  });
</script>
<!-- $(document) -->
<!-- <script type='text/javascript'>
  
  var myCodeMirror = CodeMirror(document.getElementById("code"), {
    value: "function myScript(){return 100;}\n",
    mode:  "javascript"
  });

</script>
 -->
</html>